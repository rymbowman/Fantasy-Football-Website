import{P as c,j as s,r as p,S as y}from"./index-DnSvBsN8.js";import{P}from"./PageHeader-Y3u8qxoU.js";import{u as w}from"./useFetchTeams-DnNVNvoc.js";import{f as M,b as E}from"./sleeperApi-BE8q_8nq.js";const W=({matchup:e,currentWeek:t})=>{const n=e.week<t,o=n&&e.points>e.opponentPoints,a=n&&e.points<e.opponentPoints,u=n&&e.points===e.opponentPoints,i=o?"Win!":a?"Loss":u?"Tie":null;return s.jsxs("li",{className:o?"win":a?"loss":u?"tie":"neutral",children:[s.jsxs("span",{className:"schedule-week",children:[" Week: ",e.week]}),s.jsxs("span",{className:"schedule-opponent",children:["vs ",e.opponent]}),s.jsx("span",{className:"schedule-score",children:e.points!==null&&e.opponentPoints!==null?`${e.points} - ${e.opponentPoints}`:null}),s.jsx("span",{className:"schedule-result",children:n?i:null})]})};W.propTypes={currentWeek:c.number,matchup:c.shape({points:c.number,opponentPoints:c.number,week:c.number,opponent:c.string})};const N=({matchups:e,currentWeek:t})=>s.jsx("div",{className:"team-schedule",children:s.jsx("ul",{className:"team-schedules",children:e.map((n,o)=>s.jsx(W,{matchup:n,currentWeek:t},o))})});N.propTypes={teamName:c.string,matchups:c.array,currentWeek:c.number};const v=e=>{const[t,n]=p.useState({});return p.useEffect(()=>{M(e).then(n).catch(console.error)},[e]),t},C=()=>{const[e,t]=p.useState(null);return p.useEffect(()=>{E().then(t).catch(console.error)},[]),e},_=e=>{const t=v(e),{teams:n,loading:o,error:a}=w(),u=C(),[i,x]=p.useState({});return{schedule:t,teams:n,loading:o,error:a,currentWeek:u,expandedTeams:i,toggleTeamSchedule:d=>{x(h=>({...h,[d]:!h[d]}))},getMatchupsByTeam:(d,h,f,b)=>{const T=[];for(let m=1;m<=b;m++){const k=d[`week${m}`];if(k){const j=k.find(r=>r.roster_id===parseInt(f));if(j){const r=k.find(S=>S.matchup_id===j.matchup_id&&S.roster_id!==parseInt(f));T.push({week:m,opponent:h[r==null?void 0:r.roster_id]||"unknown opponent",points:j.points||null,opponentPoints:r==null?void 0:r.points})}}}return T}}},$=()=>{const{schedule:t,teams:n,loading:o,error:a,currentWeek:u,expandedTeams:i,toggleTeamSchedule:x,getMatchupsByTeam:g}=_(14);return o?s.jsx(y,{}):a?s.jsxs("div",{children:["Error loading schedules: ",a.message]}):s.jsxs("div",{className:"schedules-container",children:[s.jsx(P,{pageTitle:"Team Schedules"}),s.jsx("div",{className:"schedules",children:Object.keys(n).length>0&&Object.keys(t).length>0?Object.keys(n).map(l=>s.jsxs("div",{className:"schedule-container-row",children:[s.jsxs("button",{className:"schedules-accordian-button",onClick:()=>x(l),children:[n[l],"'s Schedule"]}),i[l]&&s.jsx(N,{matchups:g(t,n,l,14),currentWeek:u},l)]},l)):s.jsx("p",{children:"Loading Schedules ..."})})]})};export{$ as default};
