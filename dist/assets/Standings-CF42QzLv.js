import{r,j as s,S as j}from"./index-BpZPu7cu.js";import{P as f}from"./PageHeader-Xrq80CK9.js";import{a as c,l as g}from"./sleeperApi-B8G7RgNv.js";const N=()=>{const[t,d]=r.useState({}),[l,e]=r.useState(!0),[i,m]=r.useState(null);return r.useEffect(()=>{(async()=>{try{const o=await c.get(`https://api.sleeper.app/v1/league/${g}/users`),p=await c.get(`https://api.sleeper.app/v1/league/${g}/rosters`);let u=o.data;const h=p.data.map(a=>{const n=u.find(x=>x.user_id===a.owner_id);return{owner:n.display_name,teamName:n.metadata.team_name,wins:a.settings.wins,losses:a.settings.losses,ties:a.settings.ties,pointsFor:a.settings.fpts,pointsAgainst:a.settings.fpts_against}}).sort((a,n)=>a.wins!==n.wins?n.wins-a.wins:n.pointsFor-a.pointsFor);d(h)}catch(o){m(o)}finally{e(!1)}})()},[]),{teams:t,loading:l,error:i}},T=()=>{const{teams:t,loading:d,error:l}=N();return d?s.jsx(j,{}):l?s.jsx("div",{children:"Error loading data"}):s.jsxs("div",{className:"standings-container",children:[s.jsx(f,{category:"standings",pageTitle:"League Standings"}),s.jsx("div",{className:"standings",children:t.length===0?"Loading...":s.jsx("ul",{children:t.map((e,i)=>s.jsxs("div",{className:"standings-row",children:[s.jsxs("div",{className:"standings-details",children:[s.jsx("div",{className:"standings-position",children:s.jsx("p",{children:i+1})}),s.jsxs("div",{className:"team-details",children:[e.teamName?s.jsx(s.Fragment,{children:s.jsx("h3",{className:"name",children:e.teamName})}):s.jsx(s.Fragment,{children:s.jsx("h3",{className:"name",children:`Team ${e.owner}`})}),s.jsxs("p",{className:"username",children:["@",e.owner]})]})]}),s.jsxs("div",{className:"standings-data",children:[s.jsxs("p",{className:"record",children:[e.wins,"-",e.losses,"-",e.ties]}),s.jsxs("div",{className:"points",children:[s.jsxs("div",{children:["PF: ",e.pointsFor]}),s.jsxs("div",{children:["PA: ",e.pointsAgainst]})]})]})]},i))})})]})};export{T as default};
